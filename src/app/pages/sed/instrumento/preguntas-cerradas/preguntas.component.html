<app-title title="Preguntas Cerradas"></app-title>
<section class="text-gray-600 body-font relative">
    <div class="container  mx-auto flex sm:flex-nowrap flex-wrap ">
      
      <div class="lg:w-2/3 md:w-1/2 bg-gray-300 rounded-lg overflow-hidden sm:mr-2 p-2 flex items-top justify-start relative bg-gray-200 dark:bg-gray-700">
        
        <div class="relative flex flex-wrap py-6 rounded shadow-md w-full bg-gray-200 dark:bg-gray-800 dark:text-white flex-col">
          <div class="text-center">
            <p class="font-medium text-xl">Universidad Nacional Casimiro Sotelo Montenegro</p> 
            <p class="font-medium text-xl">Coordinación Gestión del Talento Humano</p> 
            <p class="font-medium text-xl">Selección y Contratación de Personal</p>
            <p class="font-medium text-xl">Evaluación al Desempeño</p>
            <p class="font-medium text-xl">Categoría: {{tipoEntidad().nombre}}</p>
          </div>
          <div class="mt-5">
            

<div class="relative overflow-x-auto">
  
    <!--  <pre>{{dataView() | json}}</pre> -->
  <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-200">
      <thead class="text-xs text-gray-800 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-200">
          <tr>
              <th scope="col" class="px-6 py-3">
                  
              </th>
              <th scope="col" class="px-6 py-3 text-base">
                Dimensiones
              </th>
          </tr>
      </thead>
      <tbody>
        @for (dv of dimensiones(); track dv.id; let index = $index) {
          @if(dv.preguntasCerradas!=null && dv.preguntasCerradas!.length > 0)
          {
          <tr class="text-xs text-gray-700 bg-gray-50 dark:bg-gray-600 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700">
              <th scope="row" class="px-6 py-4 font-bold text-gray-900 whitespace-nowrap dark:text-white w-px text-sm" >
                  {{ index+1 }}
              </th>
              <td class="px-6 py-4 text-sm font-bold">
                  {{ dv.nombre }}
              </td>
          </tr>
          <tr class="text-xs text-gray-700 bg-gray-50 dark:bg-gray-600 dark:text-gray-100">
            <td></td>
            <td>
              {{resetIncrement()}}
                @for (p of dv.preguntasCerradas; track p.id;let indexp = $index) {
                  
                @if(dv.id == p.dimesionId)
                {
                <tr class="text-xs w-full text-gray-700 bg-gray-50 dark:bg-gray-500 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600">
                <th scope="row" class="px-6 py-4 font-bold text-sm text-gray-900 whitespace-nowrap dark:text-white w-px ">
                    {{ (index+1) + '.' + i }}
                    {{increment(1)}}
                </th>
                <td class="px-6 py-4 w-full text-sm">
                    {{ p.nombre }}
                </td>
                <td class="px-6 py-4 flex">
                  <a (click)="edit(p)"  class="font-medium text-blue-600 dark:text-blue-500 hover:underline cursor-pointer">
                      <svg class="w-6 h-6 text-gray-800 text-yellow-500 hover:text-yellow-400 dark:text-white"   xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"/>
                        </svg>
                  </a>
                  <a (click)="modelDelete(p)" class="font-medium text-blue-600 dark:text-blue-500 hover:underline cursor-pointer">
                      <svg class="w-6 h-6 text-red-500 hover:text-red-400 dark:text-white"   xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"/>
                        </svg>
                  </a>
              </td>
            </tr>
        }
        }
        </td>
          </tr>
        }
      }
        @empty {
          <div class="p-4 m-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 dark:bg-gray-700 dark:text-yellow-300" role="alert">
            <span class="font-medium">Alerta!</span> No hay datos que mostrar.
          </div>
        }
      </tbody>
  </table>
</div>

          </div>
          
          
        </div>
      </div>
      <div class= "lg:w-1/3 md:w-1/2 bg-gray-200 flex flex-col md:ml-auto w-full h-min md:py-8 mt-8 md:mt-0 rounded p-5 border-4 border-gray-300 dark:bg-gray-700 dark:text-white">
        <h2 class="text-lg mb-1 font-medium title-font">Pregunta</h2>
        <form novalidate  [formGroup]="preguntaForm" (ngSubmit)="onSubmit()">
        <div class="relative mb-4 mt-3">

          <label for="nombre" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Ingrese la Pregunta</label>
          <input type="text" formControlName="nombre" name="nombre" id="nombre" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ingrese el nombre de la Escala" required  />
          <div class="p-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert" [hidden]="preguntaForm.controls.nombre.valid || preguntaForm.controls.nombre.pristine">
            <span class="font-medium">Alerta!</span> El campo pregunta es obligatorio
          </div>
        </div>
        <div class="relative mb-4">
            <label for="DimesionId" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Dimensión</label>
            <select id="dimesionId" formControlName="dimesionId" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                <option value="0" selected>--- Seleccione ---</option>
                @if(dimensiones().length > 0)
             {
                    @for (dimension of dimensiones(); track dimension.id) {
                        <option value="{{dimension.id}}">{{dimension.nombre}}</option>
                    }
             }
                
            </select>
            <div class="p-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert" [hidden]="preguntaForm.controls.dimesionId.valid || preguntaForm.controls.dimesionId.pristine">
              <span class="font-medium">Alerta!</span> El campo dimensión es obligatorio
            </div>
        </div>
        
      
        <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 w-full" [disabled]="preguntaForm.invalid">Guardar</button>
        <button (click)="back()" data-modal-target="static-modal" data-modal-toggle="static-modal" type="button" class="mt-2 text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800">Regresar</button>
    </form>
      </div>
    </div>
  </section>

  <app-modal-delete (outputEvent)="delete()" />